
<h1> Use Drag Drop </h1>

<main>

    <div class="dashboard" data-drag-now="false">

        <div class="dashboard__column">

            <div class="dashboard__column__header">
                <h2 class="dashboard__column__header__title"> Column</h2>
                <div class="dashboard__column__header__actions-bar">
                    <button >add task </button>
                    <button >edit column </button>
                </div>
            </div>

        </div>

        <div class="dashboard__column">
            <div class="dashboard__column__header">
                <h2 class="dashboard__column__header__title"> Column</h2>
                <div class="dashboard__column__header__actions-bar">
                    <button >add task </button>
                    <button >edit column </button>
                </div>
            </div>

            <div class="dashboard__item" id="lorem">

                <div class="dashboard__item__header">

                    <div class="dashboard__item__header__actions-bar">
                        <button draggable="true" id="lorem-btn"> drag item </button>
                        <button >edit item </button>
                    </div>

                    <h3 class="dashboard__item__header__title"> id="lorem" </h3>

                </div>

                <p class="dashboard__item__description">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque, non.
                </p>

            </div>

            <div class="dashboard__item" draggable="true">
                <div class="dashboard__item__header">

                    <div class="dashboard__item__header__actions-bar">
                        <button> drag item </button>
                        <button >edit item </button>
                    </div>

                    <h3 class="dashboard__item__header__title"> Lorem ipsum dolor </h3>

                </div>

                <p class="dashboard__item__description">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. A asperiores, libero nam placeat quo sit ut veritatis. Facere, quisquam, reiciendis.
                </p>
            </div>


        </div>

        <div class="dashboard__column">

            <div class="dashboard__column__header">
                <h2 class="dashboard__column__header__title"> Column</h2>
                <div class="dashboard__column__header__actions-bar">
                    <button >add task </button>
                    <button >edit column </button>
                </div>
            </div>

            <div class="dashboard__item" draggable="true" >

                <div class="dashboard__item__header">

                    <div class="dashboard__item__header__actions-bar">
                        <button> drag item </button>
                        <button >edit item </button>
                    </div>

                    <h3 class="dashboard__item__header__title">  task title </h3>

                </div>

                <p class="dashboard__item__description">
                    description
                </p>

            </div>

        </div>
    </div>



</main>

<script defer type="module">
import { useDragDrop } from '../features/useDragDrop.js'

const dashboard = document.querySelector('.dashboard');
const dragTargets = document.querySelectorAll('.dashboard__item');

const  onDragStart  = (dragTarget, dragTargetClone) => {
    dashboard.dataset.dragNow ='true'
    console.log('onDragStart')

    if (dragTarget.classList.contains('.dashboard__item')) {
        dragTarget.classList.add('dashboard--drag-target')

        return true
    }

    // dragTargetClone.classList.add('dashboard--drag-target')
    // dashboard.dataset.dragNow = 'true'

}

const  onDragEnd  = (dragTarget, dragTargetClone) => {
    dashboard.dataset.dragNow ='false'
    console.log('onDragEnd')
    dragTarget.classList.remove('dashboard--drag-target')
    // dashboard.dataset.dragNow = 'false'
}


const onDragEnter   = (dragTarget, dropTarget) => {
    console.log('onDragEnter')
    if (dropTarget.classList.contains('.dashboard__column')) {
        dropTarget.classList.add('dashboard--drop-target')
    }
}

const onDragLeave   = (dragTarget, dropTarget) => {
    console.log('onDragLeave')
    dropTarget.classList.remove('dashboard--drop-target')
}

const onDragDrop   = (dragTarget, dropTarget) => {
    console.log('onDragDrop')

    dropTarget.classList.remove('dashboard--drop-target')

    if (dropTarget.classList.contains('.dashboard__column')) {
        dropTarget.append( dragTarget )
    }

}

    useDragDrop ({
        dragTargets,
        onDragStart,
        onDragEnd,
        onDragEnter,
        onDragLeave,
        onDragDrop
    })
</script>

<style>
    @import "@/css/dashboard.css";
</style>
